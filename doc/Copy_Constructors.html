

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Copy Constructors and Assignment Operators &mdash; decipher 0.1 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="decipher 0.1 documentation" href="../index.html"/>
        <link rel="next" title="Queues" href="Queues.html"/>
        <link rel="prev" title="Header Files" href="Headers.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../index.html" class="fa fa-home"> decipher</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Abstract_Data_Types.html">Abstract Data Types (ADT)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Abstract_Data_Types.html#data-structure">1) Data Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="Abstract_Data_Types.html#algorithm">2) Algorithm</a></li>
<li class="toctree-l2"><a class="reference internal" href="Abstract_Data_Types.html#interface">3) Interface</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Constructors.html">Constructors</a></li>
<li class="toctree-l1"><a class="reference internal" href="Destructors.html">Destructors</a></li>
<li class="toctree-l1"><a class="reference internal" href="Pointers.html">Pointers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Pointers.html#void-pointers">Void Pointers</a></li>
<li class="toctree-l2"><a class="reference internal" href="Pointers.html#fuction-pointers">Fuction Pointers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Linked_lists.html">Linked Lists</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Linked_lists.html#doubly-linked-lists">Doubly-linked Lists</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Class_composition.html">Class composition</a></li>
<li class="toctree-l1"><a class="reference internal" href="Headers.html">Header Files</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Copy Constructors and Assignment Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="Queues.html">Queues</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Queues.html#algorithm">Algorithm</a></li>
<li class="toctree-l2"><a class="reference internal" href="Queues.html#data-structures">Data structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="Queues.html#interface">Interface</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Stacks.html">Stacks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Stacks.html#infix-and-postfix-expressions">Infix and Postfix expressions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Inheritance.html">Inheritance</a></li>
<li class="toctree-l1"><a class="reference internal" href="Polymorphism.html">Polymorphism</a></li>
<li class="toctree-l1"><a class="reference internal" href="Virtual_fucntions.html">Virtual functions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Virtual_fucntions.html#character">Character()</a></li>
<li class="toctree-l2"><a class="reference internal" href="Virtual_fucntions.html#name">name()</a></li>
<li class="toctree-l2"><a class="reference internal" href="Virtual_fucntions.html#printweapon">printWeapon()</a></li>
<li class="toctree-l2"><a class="reference internal" href="Virtual_fucntions.html#attackaction">attackAction()</a></li>
<li class="toctree-l2"><a class="reference internal" href="Virtual_fucntions.html#id21">~Character()</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Generic_Programming.html">Generic programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="Templates.html">Templates</a></li>
<li class="toctree-l1"><a class="reference internal" href="Standard_Template_Classes.html">Standard Template Library (STL) Classes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Standard_Template_Classes.html#vectors">Vectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="Standard_Template_Classes.html#lists">Lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="Standard_Template_Classes.html#maps">Maps</a></li>
<li class="toctree-l2"><a class="reference internal" href="Standard_Template_Classes.html#sets">Sets</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Recursion.html">Recursion</a></li>
<li class="toctree-l1"><a class="reference internal" href="Quicksort.html">Quicksort</a></li>
<li class="toctree-l1"><a class="reference internal" href="Big-O.html">Algorithm Comparison</a></li>
<li class="toctree-l1"><a class="reference internal" href="HashTables.html">Hash Tables</a><ul>
<li class="toctree-l2"><a class="reference internal" href="HashTables.html#closed-hash-table">Closed Hash Table</a></li>
<li class="toctree-l2"><a class="reference internal" href="HashTables.html#open-hash-table">Open Hash Table</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="BinaryTrees.html">Binary Trees</a><ul>
<li class="toctree-l2"><a class="reference internal" href="BinaryTrees.html#traversals">Traversals</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="BinarySearchTrees.html">Binary Search Trees (BST)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Unordered_map.html">Unordered map</a></li>
<li class="toctree-l1"><a class="reference internal" href="Heap.html">Heap</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Heap.html#extracting-the-biggest-item-from-a-maxheap-smallest-item-from-a-minheap">Extracting the biggest item from a maxheap (smallest item from a minheap)</a></li>
<li class="toctree-l2"><a class="reference internal" href="Heap.html#adding-a-node-to-a-maxheap-minheap-reheapification">Adding a node to a maxheap/minheap (reheapification)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Priority_queue.html">Priority queue</a></li>
<li class="toctree-l1"><a class="reference internal" href="Heapsort.html">Heapsort</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Heapsort.html#step-1">Step 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="Heapsort.html#step-2">Step 2</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Tables.html">Tables</a></li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">decipher</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li>Copy Constructors and Assignment Operators</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../_sources/doc/Copy_Constructors.rst.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="copy-constructors-and-assignment-operators">
<h1>Copy Constructors and Assignment Operators<a class="headerlink" href="#copy-constructors-and-assignment-operators" title="Permalink to this headline">¶</a></h1>
<p>Here is a little more on the syntax of copy constructors and assignment operators that I have not gone over.</p>
<p>A copy constructor’s job is to create a new variable based on the content of an existing one.
It does this by
(1) allocating memory for the new variable based on how much memory is allocated in the old one and
(2) copying the data from the old variable into the new one.
Unlike the assignment operator, the copy constructor does NOT deallocate memory.
Why?
There is nothing for it to deallocate.
You are creating a new variable from scratch, and you certainly don’t want to destroy the existing variable.</p>
<p>The name of the copy constructor must be the class name.
So how do you differentiate it from the constructor, whose name is also the class name?
The copy constructor takes in a constant reference of type class.
It also has no return type.
Why? It’s like a constructor.
They both don’t have return types because they aren’t technically called by the code, they are called by the memory allocation, which implicitly calls them.
This has to do with the fact that whenever you create a new variable, the compiler has to figure out how much memory to allocate first, and then actually construct it.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Foo</span>
<span class="p">{</span>
<span class="p">..........................</span>
<span class="n">Foo</span> <span class="p">(</span><span class="k">const</span> <span class="n">Foo</span> <span class="o">&amp;</span><span class="n">src</span><span class="p">)</span> <span class="p">{...}</span>
<span class="p">..........................</span>
<span class="p">};</span>
</pre></div>
</div>
<p>// OR</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Foo</span> <span class="p">{...};</span>
<span class="n">Foo</span><span class="o">::</span><span class="n">Foo</span> <span class="p">(</span><span class="k">const</span> <span class="n">Foo</span> <span class="o">&amp;</span><span class="n">src</span><span class="p">)</span> <span class="p">{...}</span>
</pre></div>
</div>
<p>An assignment operator’s job is to change the contents of an existing variable (target variable) based on the contents of another variable (source variable).
It does this by
(1) checking that it is not attempting to change the contents of two variables that refer to the same variable (aliasing);
(2) deallocating all memory in the target variable (deleting it);
(3) copying the data from the source variable into the target; and
(4) returning a reference to the target.
Why do we have to do the first step?
If you don’t prevent it, the code will go on to delete the target variable (which is also the source variable),
and then attempt to copy the contents of the source variable into the target variable, but now neither of them exist.
The check is done by this code which should be put at the beginning of the code:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="o">&amp;</span><span class="n">src</span> <span class="o">==</span> <span class="k">this</span><span class="p">)</span>
   <span class="k">return</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">);</span>
</pre></div>
</div>
<p>The name of assignment operator must be <code class="docutils literal notranslate"><span class="pre">operator=</span></code>.
It must return a reference to the class.
Like the copy constructor, it must take in a constant reference to the class as a parameter.
Unlike the copy constructor, it does have return type.
Why?
As we said before, the copy constructor is called through the memory allocation because you’re creating a new variable.
But the assignment operator does NOT create a new variable, so it doesn’t go through memory allocation, so it IS called by the code.
How are you calling it?
See where it happens:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="nf">bar</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">boo</span><span class="p">;</span>
<span class="n">boo</span> <span class="o">=</span> <span class="n">bar</span><span class="p">;</span>    <span class="c1">// By using &quot;=&quot; to assign an existing variable to another, you are in fact calling the assignment operator.</span>
</pre></div>
</div>
<p>Here is the syntax for the function definition</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Bar</span>
<span class="p">{</span>
<span class="p">....................................</span>
<span class="n">Bar</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">Bar</span> <span class="o">&amp;</span><span class="n">src</span><span class="p">)</span> <span class="p">{...}</span>
<span class="p">....................................</span>
<span class="p">};</span>
</pre></div>
</div>
<p>// OR</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">class</span>  <span class="nc">Bar</span> <span class="p">{...};</span>
 <span class="n">Bar</span><span class="o">&amp;</span> <span class="n">Bar</span><span class="o">::</span><span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span>  <span class="n">Bar</span> <span class="o">&amp;</span><span class="n">src</span><span class="p">)</span> <span class="p">{...}</span>
</pre></div>
</div>
<p>You need to define your own copy constructor/assignment operator/destructor in the case of dynamically allocated variables and arrays.
The implicit copy constructor/assignment operator/destructor works fine for ALL static variables.
It’s the dynamic array that needs a deep copy.</p>
<p>Why do you need to define your own copy constructor in the case of a dynamic variable?
The compiler-generated copy constructor will do a shallow copy, meaning it will just copy the values,
but it WON’T create a new dynamic variable, so you’ll end up with two variables that really just two different names for the same variable in memory (alias).</p>
<p>Why do you need to define your own assignment operator in the case of a dynamic variable?
The compiler-generated assignment operator WON’T deallocate the memory and instead just do a shallow copy (also known as a memberwise copy).</p>
<p>Why do you need to define your own destructor in the case of a dynamic variable?
The compiler doesn’t destroy variables in the heap with the implicit destructor.</p>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Queues.html" class="btn btn-neutral float-right" title="Queues">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Headers.html" class="btn btn-neutral" title="Header Files"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, neda vesselinova.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>